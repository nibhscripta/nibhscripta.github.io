<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated Plots</title>
    <link rel="icon" type="image/icon" href="../favicon.ico"/>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div class="home-body" style="max-width: 600px;">
        <!-- Post title -->
        <h1>Animated Plots</h1>
        <p style="color: #bbb;">27 April 2023</p>
        <!-- post body -->
        <p>See <a href="https://matplotlib.org/stable/api/animation_api.html">matplotlib.animation</a> for more information. From <a href="https://matplotlib.org/stable/api/animation_api.html">matplotlib.animation</a>, PillowWriter will be used to write a matplotlib plot to a frame of a .gif. First, some imports:</p>
<!-- code snippet -->
<script src="https://emgithub.com/embed-v2.js?target=https%3A%2F%2Fgithub.com%2Fnibhscripta%2Fnibhscripta.github.io%2Fblob%2Fa54cfd60616847621a623717a601ce4568b45aaf%2Fanimate-plots%2Fanimate%2520gif.py%23L1-L4&style=atom-one-dark&type=code&showFullPath=on&showCopy=on"></script>
        <p>Next, write a function that takes in an argument for what will be animated in the plot. In this example, a sine wave will be animated, and so the argument is the phase of the sine wave.</p>
<!-- code snippet -->
<script src="https://emgithub.com/embed-v2.js?target=https%3A%2F%2Fgithub.com%2Fnibhscripta%2Fnibhscripta.github.io%2Fblob%2Fa54cfd60616847621a623717a601ce4568b45aaf%2Fanimate-plots%2Fanimate%2520gif.py%23L6-L11&style=atom-one-dark&type=code&showFullPath=on&showCopy=on"></script>
        <p>Now, create some a values to loop over. Each iteration in the loop will be one frame in the animation.</p>
<!-- code snippet -->
<script src="https://emgithub.com/embed-v2.js?target=https%3A%2F%2Fgithub.com%2Fnibhscripta%2Fnibhscripta.github.io%2Fblob%2Fa54cfd60616847621a623717a601ce4568b45aaf%2Fanimate-plots%2Fanimate%2520gif.py%23L13&style=atom-one-dark&type=code&showFullPath=on&showCopy=on"></script>
        <p>To write frames to the animation, a writer object needs to defined with PillowWriter. Specify the frames per second. Additional metadata can also be specified in the PillowWriter object. Additionally, a matplotlib figure object needs to be defined. The PillowWriter object will pull frames from this figure object.</p>
<!-- code snippet -->
<script src="https://emgithub.com/embed-v2.js?target=https%3A%2F%2Fgithub.com%2Fnibhscripta%2Fnibhscripta.github.io%2Fblob%2Fa54cfd60616847621a623717a601ce4568b45aaf%2Fanimate-plots%2Fanimate%2520gif.py%23L15-L19&style=atom-one-dark&type=code&showFullPath=on&showCopy=on"></script>
        <p>Use the "with" keyword to loop through the a values with the "saving" method of the PillowWriter object. Within this method, specify the figure object that is the target of the PillowWriter object, the file name, and the dpi of the output animation. Within the loop, use the "clf" function to clear the figure canvas between frames, and call the plot function. After the plot function is called, use the "get_frame" method of the PillowWriter object to save the plot to one frame of the animation. Additionally, use the "pause" function to preview the animation. Without the pause, the .gif will be written headlessly.</p>
<!-- code snippet -->
<script src="https://emgithub.com/embed-v2.js?target=https%3A%2F%2Fgithub.com%2Fnibhscripta%2Fnibhscripta.github.io%2Fblob%2Fa54cfd60616847621a623717a601ce4568b45aaf%2Fanimate-plots%2Fanimate%2520gif.py%23L21-L26&style=atom-one-dark&type=code&showFullPath=on&showCopy=on"></script>
        <p>See the result in <a href="#figure-1">Figure 1</a>.</p>
        <div class="figure" id="figure-1">
            <img src="plot.gif" alt="Animated sine wave .gif.">
            <p><strong><i>Figure 1.</i></strong> Animated sine wave .gif.</p>
        </div>
        <p>.gif files can be large and difficult to compress. Instead, use ffmpeg to create a video file by using FFMpegWriter. Note that ffmpeg must be installed before continuing. Additional imports need to defined.</p>
<!-- code snippet -->
<script src="https://emgithub.com/embed-v2.js?target=https%3A%2F%2Fgithub.com%2Fnibhscripta%2Fnibhscripta.github.io%2Fblob%2Fa54cfd60616847621a623717a601ce4568b45aaf%2Fanimate-plots%2Fanimate%2520mp4.py%23L1-L2&style=atom-one-dark&type=code&showFullPath=on&showCopy=on"></script>
        <p>Tell matplotlib where to find the executable for ffmpeg by specifying the path within 'animation.ffmpeg_path' within the rcParams object.</p>
<!-- code snippet -->
<script src="https://emgithub.com/embed-v2.js?target=https%3A%2F%2Fgithub.com%2Fnibhscripta%2Fnibhscripta.github.io%2Fblob%2Fa54cfd60616847621a623717a601ce4568b45aaf%2Fanimate-plots%2Fanimate%2520mp4.py%23L6&style=atom-one-dark&type=code&showFullPath=on&showCopy=on"></script>
        <p>Everything is done the same except change the writer object to FFMpegWriter.</p>
<!-- code snippet -->github-dark
<script src="https://emgithub.com/embed-v2.js?target=https%3A%2F%2Fgithub.com%2Fnibhscripta%2Fnibhscripta.github.io%2Fblob%2Fa54cfd60616847621a623717a601ce4568b45aaf%2Fanimate-plots%2Fanimate%2520mp4.py%23L19&style=atom-one-dark&type=code&showFullPath=on&showCopy=on"></script>
        <p>Also, change the file name.</p>
<!-- code snippet -->
<script src="https://emgithub.com/embed-v2.js?target=https%3A%2F%2Fgithub.com%2Fnibhscripta%2Fnibhscripta.github.io%2Fblob%2Fa54cfd60616847621a623717a601ce4568b45aaf%2Fanimate-plots%2Fanimate%2520mp4.py%23L23&style=atom-one-dark&type=code&showFullPath=on&showCopy=on"></script>
        <p>See the video in <a href="#figure-2">Figure 2</a>.</p>
        <div class="figure" id="figure-2">
            <video src="plot.mp4" controls width="250" loop="True" autoplay="True"></video>
            <p><strong><i>Figure 2.</i></strong> Animated sine wave .mp4.</p>
        </div>
        <p>View the code to create the <a href="https://github.com/nibhscripta/nibhscripta.github.io/blob/main/animate-plots/animate%20gif.py">.gif</a> and the  <a href="https://github.com/nibhscripta/nibhscripta.github.io/blob/main/animate-plots/animate%20mp4.py">.mp4</a></p>
        <!-- footer -->
        <footer>
            <div class="links">
                <a href="/">Home</a>
                <a href="https://github.com/nibhscripta/nibhscripta.github.io">Source code</a>
                <a href="mailto:nibhscripta@tutanota.com">Contact</a>
            </div>
        </footer>
    </div>
</body>
<script src="../js/copy-code.js"></script>
</html>